<!DOCTYPE html>
<html>

<head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>AJC Live Map</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false&key=AIzaSyD0GqSibvgdIgVhKXwBTmfa9NA-ro-4BQk"
            type="text/javascript"></script>

    <!--Favicon-->

    <link rel="apple-touch-icon" sizes="57x57" href="../static/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../static/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../static/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../static/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../static/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../static/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../static/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../static/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../static/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../static/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../static/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../static/favicon/favicon-16x16.png">
    <link rel="manifest" href="../static/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

</head>
<body>
    <div id="map" style="width: 100%; height: 800px;"></div>

    <script type="text/javascript">
        var locations = [
          ['Atlanta Journal Constitution', 33.92273, -84.3486237, 4],
          ['Cumming', 34.203527, -84.1657348, 5]

        ];
        var infoWindowContent = [
              ['<div class="info_content">'+
                  '<h3>Live from AJC Hackathon</h3>' +
                  '<iframe width="460" height="315" id="usr1" name="User1" src="https://www.youtube.com/embed/live_stream?channel=UCHJIR0Laf0D1afa53Z25QQQ" frameborder="0" allowfullscreen></iframe>'+
              '</div>'],

              ['<div class="info_content">'+
                  '<h3>Live from Cumming</h3>' +
                  '<iframe width="460" height="315" id="usr2" name="User2" src="https://www.youtube.com/embed/live_stream?channel=UC8fw-XD66TdvkF37u2wb6dA" frameborder="0" allowfullscreen></iframe>'+
              '</div>']
        ];


        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 5,
            center: new google.maps.LatLng(33.92273, -84.3486237),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var infowindow = new google.maps.InfoWindow();

        var marker, i;

        for (i = 0; i < locations.length; i++) {
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                return function () {
                    infowindow.setContent(infoWindowContent[i][0]);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        }
    </script>
    <script type="text/javascript">
        // Client ID and API key from the Developer Console
        var CLIENT_ID = '479278418553-vcb2qr6fdmu86n499jhh8gc8d3irccm6.apps.googleusercontent.com';
        var client_2 = '524164983290-7dosi7ah0ugjlbker0c6am0ulrbai74c.apps.googleusercontent.com';

        // Array of API discovery doc URLs for APIs used by the quickstart
        var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"];

        // Authorization scopes required by the API. If using multiple scopes,
        // separated them with spaces.
        var SCOPES = 'https://www.googleapis.com/auth/youtube.readonly';

        var authorizeButton = document.getElementById('authorize-button');
        var signoutButton = document.getElementById('signout-button');

        /**
         *  On load, called to load the auth2 library and API client library.
         */
        function handleClientLoad() {
            gapi.load('client:auth2', initClient);
            gapi.load('client:auth2', initClient2);
        }

        /**
         *  Initializes the API client library and sets up sign-in state
         *  listeners.
         */
        function initClient() {
            gapi.client.init({
                discoveryDocs: DISCOVERY_DOCS,
                clientId: CLIENT_ID,
                scope: SCOPES
            }).then(function () {
                // Listen for sign-in state changes.
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

                // Handle the initial sign-in state.
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                authorizeButton.onclick = handleAuthClick;
                signoutButton.onclick = handleSignoutClick;
            });
        }

        function initClient2() {
            gapi.client.init({
                discoveryDocs: DISCOVERY_DOCS,
                clientId: client_2,
                scope: SCOPES
            }).then(function () {
                // Listen for sign-in state changes.
                gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

                // Handle the initial sign-in state.
                updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                authorizeButton.onclick = handleAuthClick;
                signoutButton.onclick = handleSignoutClick;
            });
        }

        /**
         *  Called when the signed in status changes, to update the UI
         *  appropriately. After a sign-in, the API is called.
         */
        function updateSigninStatus(isSignedIn) {
            if (isSignedIn) {
                authorizeButton.style.display = 'none';
                signoutButton.style.display = 'block';
                getChannel();
            } else {
                authorizeButton.style.display = 'block';
                signoutButton.style.display = 'none';
            }
        }

        /**
         *  Sign in the user upon button click.
         */
        function handleAuthClick(event) {
            gapi.auth2.getAuthInstance().signIn();
        }

        /**
         *  Sign out the user upon button click.
         */
        function handleSignoutClick(event) {
            gapi.auth2.getAuthInstance().signOut();
        }

        /**
         * Append text to a pre element in the body, adding the given message
         * to a text node in that element. Used to display info from API response.
         *
         * @param {string} message Text to be placed in pre element.
         */
        function appendPre(message) {
            var pre = document.getElementById('content');
            var textContent = document.createTextNode(message + '\n');
            pre.appendChild(textContent);
        }

        /**
         * Print files.
         */
        function getChannel() {
            gapi.client.youtube.channels.list({
                'part': 'snippet,contentDetails,statistics',
                'forUsername': 'GoogleDevelopers'
            }).then(function(response) {
                var channel = response.result.items[0];
                appendPre('This channel\'s ID is ' + channel.id + '. ' +
                          'Its title is \'' + channel.snippet.title + ', ' +
                          'and it has ' + channel.statistics.viewCount + ' views.';
            });
        }

    </script>

    <script async defer src="https://apis.google.com/js/api.js"
            onload="this.onload=function(){};handleClientLoad()"
            onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
</body>
</html>